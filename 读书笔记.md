# 读书笔记

**网络协议：** 规定了所交换的数据的格式和时序，以及在发送/接收时的动作。

计算机网络体系结构：

| OSI体系结构 | TCP/IP的体系结构    | 原理体系结构 |
| ----------- | ------------------- | ------------ |
| 应用层      | 应用层              | 应用层       |
| 表示层      | 各种应用层协议      | 应用层       |
| 会话层      | HTTP，FTP，SMTP ··· | 应用层       |
| 运输层      | 运输层（TCP、UDP）  | 运输层       |
| 网络层      | 网际层IP            | 网络层       |
| 数据链路层  | 网络接口层          | 数据链路层   |
| 物理层      | 网络接口层          | 物理层       |

# 物理层

传输比特流，是最底层的。

**四个特性**：机械（形状，尺寸等）、电气（电压等）、功能（电平的意义）和过程（不同功能可能出现的顺序）。

**传输方式：**

并行和串行、

同步（以数据块形式传送，字节间没有间隔，没有起始/结束位。）和异步（以字节为独立的单位，字节间时间间隔不定，接收端每个字节起始处对字节进行同步。每个字节前后有起始/结束位，字节级上异步，字节中的比特人要同步）、

单工，半双工和全双工。

信道复用技术：

频分复用，时分复用，统计时分复用，波分复用

# 数据链路层

网桥

 **使用的信道主要有两种：**

​	点对点信道、广播信道

**数据单元：**

​	帧（将网络层数数据包封装成帧）

​	帧开始和结束有定界标志，会产生错误定界问题，采用字节填充或字符填充解决，在数据中的标记符号前加一个转义字符，形成一种“透明传输”。

**差错检测：**

​	循环冗余检测

**可靠传输：**

​	停止等待协议：发现错误就重传。

​	回退N步协议

​	选择重传协议



以太网的物理地址，即MAC地址，实际上就是适配器的地址或适配器的标识符，与主机所在位置无关。源地址和目的地址都是48位长。

**以太网的媒体接入控制：CSMA/CD** 载波监听多址接入/碰撞检测

以太网规定：最短有效帧长64字节

​	以太网的端到端时延实际上小于争用期的一半（25.6μs）争用期51.2μs；

​	帧间最小时间间隔为9.6μs；



**IEEE的802.11是无线局域网的标准，Wi-Fi用的。** 

802.11在MAC层用CSMA/CA协议，以尽量减小碰撞发生的概率。不能使用CSMA/CD因为无线局域网不能进行碰撞检测。在使用CSMA/CA协议同时还使用停止等待协议。采用不同于CSMA/CD的退避算法。

# 网络层

**最核心功能：分组转发和路由选择**

分组转发：每个路由中有一个转发表。

**网际协议IP：** 用来是互相连起来的**计算机网络**能够进行通信

**与IP协议配套的协议：**

​	地址解析协议ARP

​	逆地址协议RARP

​	网际控制报文协议ICMP

​	网际组管理协议IGMP

### 中间设备：

物理层：转发器

数据链路层：网桥或桥接器

网络层：路由器

网络层以上：网关

**IP地址：** 

<128:A类

128<=前八位<192：B类

192<=前八位<224：C类

前四位1110：D类

前四位1111：E类

IP地址标记一个主机或一条链路的接口

物理地址在物理层和数据链路层使用，IP地址在网络层和以上各层使用，是一种逻辑地址，有软件实现，物理地址由硬件实现。

IP地址在Ip数据包的首部，物理地址（MAC地址）在MAC帧的首部。所以在数据链路层IP地址不可见。



**地址解析协议ARP**

每个主机都设有一个ARP高速缓存，保存该网络中的各主机和路由的IP地址到物理地址的映射表，并不断更新。

现在表中查询MAC地址，找不到就广播一个带有目标IP地址ARP请求（也包含自身的IP地址到MAC地址的映射），目标收到请求后单播传回他的MAC地址。两个主机的高速缓存都更新。

每个映射都有生存时间，超过时间就删除（为了保证都是最新的映射）



# 运输层

# 应用层